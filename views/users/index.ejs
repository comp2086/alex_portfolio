<!--
File name: users/index.ejs
Author: Alex Andriishyn
Website: http://alexandriishyn.azurewebsites.net/
File description: users home and edit page
-->
<%- include ../partials/header.ejs %>
<div class="panel panel-default">
  <% if (usersCollection.length > 0) { %>
    <div class="panel-body table-responsive">
      <form method="post">
        <table class="table table-bordered table-striped table-hover">
          <thead>
            <tr>
              <th></th>
              <th>First name</th>
              <th>Last name</th>
              <th>User name</th>
              <th>Email</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <% for(var i = 0; i < usersCollection.length; i++) {
              if(editUserID != false && usersCollection[i].id === editUserID) { %>
              <tr>
                <td><%= i + 1 %></td>
                <td><input type="text" name="firstname" value="<%= usersCollection[i].firstname %>" /></td>
                <td><input type="text" name="lastname" value="<%= usersCollection[i].lastname %>" /></td>
                <td><input type="text" name="username" value="<%= usersCollection[i].username %>" /></td>
                <td><input type="email" name="email" value="<%= usersCollection[i].email %>" /></td>
                <td>
                  <a href="/users/cancel" title="Discard changes" class="btn btn-warning">
                    <span class="glyphicon glyphicon-ban-circle"> </span>
                  </a>
                  <button type="submit" class="btn btn-success" title="Apply changes">
                    <span class="glyphicon glyphicon-floppy-disk"> </span>
                  </button>
                  <a href="/users/delete/<%= usersCollection[i]._id %>" title="Delete" onclick="return confirm('Are you sure you want to delete this user?');" class="btn btn-danger">
                    <span class="glyphicon glyphicon-trash"></span>
                  </a>
                </td>
              </tr>
              <% } else { %>
              <tr>
                <td><%= i + 1 %></td>
                <td><%= usersCollection[i].firstname %></td>
                <td><%= usersCollection[i].lastname %></td>
                <td><%= usersCollection[i].username %></td>
                <td><%= usersCollection[i].email %></td>
                <td>
                  <a href="/users/<%= usersCollection[i]._id %>" title="Edit" class="btn btn-primary">
                    <span class="glyphicon glyphicon-edit"> </span>
                  </a>
                  <a href="/users/delete/<%= usersCollection[i]._id %>" title="Delete" onclick="return confirm('Are you sure you want to delete this user?');" class="btn btn-danger">
                    <span class="glyphicon glyphicon-trash"></span>
                  </a>
                </td>
              </tr>
              <% } <!--end else -->
            } %> <!-- end loop -->
            </tbody>
          </table>
        </form>
      </div>
      <% } %>
    </div>
<%- include ../partials/footer.ejs %>
